@model PositionVM

@{
    var owner = Model.Owner;
    var master = owner!.Master;
}

<br />
<form method="get" class="needs-validation" novalidate>
    <input asp-for="Id" hidden />
    <div class="card" style="width:80%">
        <div class="card-header">Position</div>
        <div class="card-body">
            <div class="row mb-3">
                <div class="col-sm-6">
                    <dl class="row">

                        @if (Model.Measuring is not null)
                        {
                            <dt class="col-sm-3 text-end">
                                <label asp-for="@Model.Measuring!"></label>
                            </dt>
                            <dd class="col-sm-9">@Model.Measuring!.FullName</dd>
                        }

                        @if (Model.Nomination is not null)
                        {
                            <dt class="col-sm-3 text-end">
                                <label asp-for="@Model.Nomination!"></label>
                            </dt>
                            <dd class="col-sm-9">@Model.Nomination!.Name</dd>
                        }

                        @if (Model.DeviceType is not null)
                        {
                            <dt class="col-sm-3 text-end">
                                <label asp-for="DeviceType"></label>
                            </dt>
                            <dd class="col-sm-9">@Model.DeviceType</dd>
                        }

                        @if (Model.FactoryNumber is not null)
                        {
                            <dt class="col-sm-3 text-end">
                                <label asp-for="FactoryNumber"></label>
                            </dt>
                            <dd class="col-sm-9">@Model.FactoryNumber</dd>
                        }

                        @if (Model.Description is not null)
                        {
                            <dt class="col-sm-3 text-end">
                                <label asp-for="Description"></label>
                            </dt>
                            <dd class="col-sm-9">@Html.Raw(Model.Description)</dd>
                        }

                        @if (Model.Included is not null)
                        {
                            <dt class="col-sm-3 text-end">
                                <label asp-for="Included"></label>
                            </dt>
                            <dd class="col-sm-9">@Html.Raw(Model.Included)</dd>
                        }

                        @if (Model.Period is not null)
                        {
                            <dt class="col-sm-3 text-end">
                                <label asp-for="@Model.Period!"></label>
                            </dt>
                            <dd class="col-sm-9">@Model.Period!.Name</dd>
                        }

                        <dt class="col-sm-3 text-end">
                            <label asp-for="PreviousDate"></label>
                        </dt>
                        <dd class="col-sm-9">@Model.PreviousDate.ToShortDateString()</dd>

                        <dt class="col-sm-3 text-end">
                            <label asp-for="NextDate"></label>
                        </dt>
                        <dd class="col-sm-9">@Model.NextDate.ToShortDateString()</dd>

                        <dt class="col-sm-3 text-end">
                            <label asp-for="NeedDate"></label>
                        </dt>
                        <dd class="col-sm-9">@Model.NeedDate.ToShortDateString()</dd>

                        <dt class="col-sm-3 text-end">
                            <label asp-for="ValidStatus"></label>
                        </dt>
                        <dd class="col-sm-9">
                            @{
                                if (@Model.ValidStatus.Equals(ValidStatusEnum.Valid))
                                {
                                    <div class="badge text-bg-light col-2">
                                        <i class="fa-solid fa-check"></i>
                                    </div>
                                }

                                else if (@Model.ValidStatus.Equals(ValidStatusEnum.NextMonthControl))
                                {
                                    <div class="badge text-bg-success col-2">
                                        <i class="fa-solid fa-exclamation"></i>
                                    </div>
                                }

                                else if (@Model.ValidStatus.Equals(ValidStatusEnum.CurrentMonthControl))
                                {
                                    <div class="badge text-bg-warning col-2">
                                        <i class="fa-solid fa-exclamation"></i>
                                    </div>
                                }

                                else if (@Model.ValidStatus.Equals(ValidStatusEnum.Invalid))
                                {
                                    <div class="badge text-bg-danger col-2">
                                        <i class="fa-solid fa-exclamation"></i>
                                    </div>
                                }

                                else
                                {
                                    <p>indefined</p>
                                }
                            }
                        </dd>

                        @if (Model.Operation is not null)
                        {
                            <dt class="col-sm-3 text-end">
                                <label asp-for="@Model.Operation!"></label>
                            </dt>
                            <dd class="col-sm-9">@Model.Operation!.Name</dd>
                        }

                        @if (Model.Category is not null)
                        {
                            <dt class="col-sm-3 text-end">
                                <label asp-for="@Model.Category!"></label>
                            </dt>
                            <dd class="col-sm-9">@Model.Category!.Name</dd>
                        }

                        @if (Model.Addition is not null)
                        {
                            <dt class="col-sm-3 text-end">
                                <label asp-for="Addition"></label>
                            </dt>
                            <dd class="col-sm-9">@Html.Raw(Model.Addition)</dd>
                        }

                        <dt class="col-sm-3 text-end">
                            <label asp-for="Created"></label>
                        </dt>
                        <dd class="col-sm-9">@Model.Created.ToShortDateString()</dd>

                    </dl>
                </div>
                <div class="col-sm-6">
                    <dl class="row">

                        <dt class="col-sm-2 text-end">
                            <div class="badge text-bg-light col-12">
                                <i class="fa-solid fa-check"></i>
                            </div>
                        </dt>
                        <dd class="col-sm-10">Valid</dd>

                        <dt class="col-sm-2 text-end">
                            <div class="badge text-bg-success col-12">
                                <i class="fa-solid fa-exclamation"></i>
                            </div>
                        </dt>
                        <dd class="col-sm-10">Control in next month</dd>

                        <dt class="col-sm-2 text-end">
                            <div class="badge text-bg-warning col-12">
                                <i class="fa-solid fa-exclamation"></i>
                            </div>
                        </dt>
                        <dd class="col-sm-10">Control in current month</dd>

                        <dt class="col-sm-2 text-end">
                            <div class="badge text-bg-danger col-12">
                                <i class="fa-solid fa-exclamation"></i>
                            </div>
                        </dt>
                        <dd class="col-sm-10">Invalid</dd>
                        
                        @if (Model.Owner is not null)
                        {
                            <div class="card-header">Owner</div>
                            <div class="card-body bg-light">
                                <dl class="row">

                                    @if(owner.ShopCode is not null){<dd class="col-sm-12">@Model.Owner.ShopCode</dd>}
                                    
                                    @if(owner.ShortName is not null){<dd class="col-sm-12">@Model.Owner.ShortName</dd>}
                                    
                                    @if(owner.FullName is not null){<dd class="col-sm-12">@Model.Owner.FullName</dd>}

                                    @if (owner.Phone is not null){<dd class="col-sm-12">@Model.Owner.Phone</dd>}  
                                    
                                    @if (master is not null)
                                    {
                                        @if (master.Name is not null)
                                        {
                                            <dt class="col-sm-4 text-end">
                                                <label asp-for="@master.Name"></label>
                                            </dt>
                                            <dd class="col-sm-8">@master.Name</dd>
                                        }

                                        @if (master.Phone is not null)
                                        {
                                            <dt class="col-sm-4 text-end">
                                                <label asp-for="@master.Phone"></label>
                                            </dt>
                                            <dd class="col-sm-8">@master.Phone</dd>
                                        }

                                        @if (master.Email is not null)
                                        {
                                            <dt class="col-sm-4 text-end">
                                                <label asp-for="@master.Email"></label>
                                            </dt>
                                            <dd class="col-sm-8">@master.Email</dd>
                                        }
                                    }
                                    
                                </dl>
                            </div>
                        }  
                        
                        <dt class="col-sm-6 text-end"></dt>
                        <dd class="col-sm-6">
                            @if (Model.Picture is not null)
                            {
                                <img style="width:100%" src="@AppConstants.PositionPartialPath@Model.Picture" alt="No picture">
                            }
                        </dd>

                    </dl>
                </div>
            </div>            
        </div>
        <div class="card-footer text-end">
            <div class="btn-group" role="group" aria-label="Basic mixed styles example">
                <a asp-controller="Position" asp-action="Update" asp-route-id="@Model.Id" class="btn btn-outline-warning">
                    <i class="bi bi-pencil-fill"></i>
                </a>
                <a asp-controller="Position" asp-action="Index" class="btn btn-outline-danger">
                    <i class="bi bi-box-arrow-left"></i>
                </a>
            </div>
        </div>
    </div>
</form>