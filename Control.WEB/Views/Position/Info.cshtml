@using Control.DAL.Models
@using Control.DAL.Configuration
@model PositionVM
<br />
<form method="get" class="needs-validation" novalidate>
    <input asp-for="Id" hidden />
    <div class="card" style="width:75%">
        <div class="card-header">Position</div>
        <div class="card-body">
            <div class="row mb-3">
                <div class="col-sm-7">
                    <dl class="row">

                        @if (Model.Measuring is not null)
                        {
                            <dt class="col-sm-3 text-end">
                                <label asp-for="@Model.Measuring!"></label>
                            </dt>
                            <dd class="col-sm-9">@Model.Measuring!.FullName</dd>
                        }

                        @if (Model.Nomination is not null)
                        {
                            <dt class="col-sm-3 text-end">
                                <label asp-for="@Model.Nomination!"></label>
                            </dt>
                            <dd class="col-sm-9">@Model.Nomination!.Name</dd>
                        }

                        <dt class="col-sm-3 text-end">
                            <label asp-for="DeviceType"></label>
                        </dt>
                        <dd class="col-sm-9">@Model.DeviceType</dd>

                        <dt class="col-sm-3 text-end">
                            <label asp-for="FactoryNumber"></label>
                        </dt>
                        <dd class="col-sm-9">@Model.FactoryNumber</dd>

                        @if (Model.Description is not null)
                        {
                            <dt class="col-sm-3 text-end">
                                <label asp-for="Description"></label>
                            </dt>
                            <dd class="col-sm-9">@Html.Raw(Model.Description)</dd>
                        }

                        @if (Model.Included is not null)
                        {
                            <dt class="col-sm-3 text-end">
                                <label asp-for="Included"></label>
                            </dt>
                            <dd class="col-sm-9">@Html.Raw(Model.Included)</dd>
                        }

                        @if (Model.Period is not null)
                        {
                            <dt class="col-sm-3 text-end">
                                <label asp-for="@Model.Period!"></label>
                            </dt>
                            <dd class="col-sm-9">@Model.Period!.Name</dd>
                        }

                        <dt class="col-sm-3 text-end">
                            <label asp-for="PreviousDate"></label>
                        </dt>
                        <dd class="col-sm-9">@Model.PreviousDate.ToShortDateString()</dd>

                        <dt class="col-sm-3 text-end">
                            <label asp-for="NextDate"></label>
                        </dt>
                        <dd class="col-sm-9">@Model.NextDate.ToShortDateString()</dd>

                        <dt class="col-sm-3 text-end">
                            <label asp-for="Status"></label>
                        </dt>
                        <dd class="col-sm-9">
                            @{
                                if (@Model.Status.Equals(StatusEnum.Valid))
                                {
                                    <div class="badge text-bg-light col-2">
                                        <i class="fa-solid fa-check"></i>
                                    </div>
                                }

                                else if (@Model.Status.Equals(StatusEnum.NextMonthControl))
                                {
                                    <div class="badge text-bg-success col-2">
                                        <i class="fa-solid fa-check"></i>
                                    </div>
                                }

                                else if (@Model.Status.Equals(StatusEnum.CurrentMonthControl))
                                {
                                    <div class="badge text-bg-warning col-2">
                                        <i class="fa-solid fa-exclamation"></i>
                                    </div>
                                }

                                else if (@Model.Status.Equals(StatusEnum.Invalid))
                                {
                                    <div class="badge text-bg-danger col-2">
                                        <i class="fa-solid fa-exclamation"></i>
                                    </div>
                                }

                                else
                                {
                                    <p>indefined</p>
                                }
                            }
                        </dd>

                        @if (Model.Operation is not null)
                        {
                            <dt class="col-sm-3 text-end">
                                <label asp-for="@Model.Operation!"></label>
                            </dt>
                            <dd class="col-sm-9">@Model.Operation!.Name</dd>
                        }

                        @if (Model.Category is not null)
                        {
                            <dt class="col-sm-3 text-end">
                                <label asp-for="@Model.Category!"></label>
                            </dt>
                            <dd class="col-sm-9">@Model.Category!.Name</dd>
                        }

                        @if (Model.Addition is not null)
                        {
                            <dt class="col-sm-3 text-end">
                                <label asp-for="Addition"></label>
                            </dt>
                            <dd class="col-sm-9">@Html.Raw(Model.Addition)</dd>
                        }

                        <dt class="col-sm-3 text-end">
                            <label asp-for="Created"></label>
                        </dt>
                        <dd class="col-sm-9">@Model.Created.ToShortDateString()</dd>

                    </dl>
                </div>
                <div class="col-sm-5">
                    <dl class="row">

                        <dt class="col-sm-2 text-end">
                            <div class="badge text-bg-light col-12">
                                <i class="fa-solid fa-check"></i>
                            </div>
                        </dt>
                        <dd class="col-sm-10">Valid</dd>

                        <dt class="col-sm-2 text-end">
                            <div class="badge text-bg-success col-12">
                                <i class="fa-solid fa-check"></i>
                            </div>
                        </dt>
                        <dd class="col-sm-10">Control in next month</dd>

                        <dt class="col-sm-2 text-end">
                            <div class="badge text-bg-warning col-12">
                                <i class="fa-solid fa-exclamation"></i>
                            </div>
                        </dt>
                        <dd class="col-sm-10">Control in current month</dd>

                        <dt class="col-sm-2 text-end">
                            <div class="badge text-bg-danger col-12">
                                <i class="fa-solid fa-exclamation"></i>
                            </div>
                        </dt>
                        <dd class="col-sm-10">Invalid</dd>

                        <dt class="col-sm-3 text-end"></dt>
                        <dd class="col-sm-9">
                            @if (Model.Picture is not null)
                            {
                                <img style="width:100%" src="@AppConstants.PositionPartialPath@Model.Picture" alt="No picture">
                            }
                        </dd>    
                        
                        @if (Model.Owner is not null)
                        {
                            <div class="card-header">Owner</div>
                            <div class="card-body bg-light">
                                <dl class="row">

                                    @if(Model.Owner.ShopCode is not null)
                                    {
                                        <dd class="col-sm-12">@Model.Owner.ShopCode</dd>
                                    }
                                    
                                    @if(Model.Owner.ShortName is not null)
                                    {
                                        <dd class="col-sm-12">@Model.Owner.ShortName</dd>
                                    }
                                    
                                    @if(Model.Owner.FullShop is not null)
                                    {
                                        <dd class="col-sm-12">@Model.Owner.FullShop</dd>
                                    }

                                    @if (Model.Owner.FullProduction is not null)
                                    {
                                        <dd class="col-sm-12">@Model.Owner.FullProduction</dd>
                                    }

                                    @if (Model.Owner.Master is not null)
                                    {
                                        <dd class="col-sm-12">@Model.Owner.Master</dd>
                                    }

                                    @if (Model.Owner.Phone is not null)
                                    {
                                        <dd class="col-sm-12">@Model.Owner.Phone</dd>
                                    }

                                    @if (Model.Owner.Email is not null)
                                    {
                                        <dd class="col-sm-12">@Model.Owner.Email</dd>
                                    }
                                    
                                </dl>
                            </div>
                        }                            
                    </dl>
                </div>
            </div>            
        </div>
        <div class="card-footer text-end">
            <div class="btn-group" role="group" aria-label="Basic mixed styles example">
                <a asp-controller="Position" asp-action="Update" asp-route-id="@Model.Id" class="btn btn-outline-warning">
                    <i class="bi bi-pencil-fill"></i>
                </a>
                <a asp-controller="Position" asp-action="Index" class="btn btn-outline-danger">
                    <i class="bi bi-box-arrow-left"></i>
                </a>
            </div>
        </div>
    </div>
</form>